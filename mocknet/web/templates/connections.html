{{define "content"}}
<section class="card" data-testid="connections-card">
  <div class="row between">
    <h1 data-testid="connections-title">Connections</h1>
    <div class="row" aria-label="Connection summary">
      <span class="badge" data-testid="connections-count">{{.AcceptedCount}} connections</span>
      <span class="badge warn" data-testid="connections-invitations-count">{{.PendingCount}} invitations</span>
    </div>
  </div>

  <div class="split" data-testid="connections-layout">
    <aside class="sidebar" data-testid="connections-sidebar">
      <div class="sidebar-title">Manage</div>
      <nav class="menu" data-testid="connections-menu">
        <a class="menu-item active" href="/connections" data-testid="connections-menu-connections">
          Connections
          <span class="menu-count">{{.AcceptedCount}}</span>
        </a>
        <a class="menu-item" href="/connections" data-testid="connections-menu-invitations">
          Invitations
          <span class="menu-count">{{.PendingCount}}</span>
        </a>
        <a class="menu-item" href="/search" data-testid="connections-menu-discover">Discover people</a>
      </nav>
      <div class="sidebar-note">This is a local-only mock UI built for automation demos.</div>
    </aside>

    <div class="main" data-testid="connections-main">
      <h2 data-testid="connections-pending-title">Invitations</h2>
      <div class="list" data-testid="connections-pending">
        {{range .Pending}}
          {{$p := index $.Profiles .ProfileID}}
          <article class="item" data-testid="pending-connection" data-profile-id="{{.ProfileID}}">
            <div class="row between">
              <div>
                <div class="name" data-testid="pending-name">{{$p.First}} {{$p.Last}}</div>
                <div class="meta" data-testid="pending-meta">{{$p.Title}} • {{$p.Company}}</div>
                <div class="meta" data-testid="pending-note">Note: {{.Note}}</div>
              </div>
              <div class="row">
                <a class="btn secondary" href="/profile/{{.ProfileID}}" data-testid="pending-view">View</a>
                <form method="post" action="/admin/accept" data-testid="pending-accept-form">
                  <input type="hidden" name="profile_id" value="{{.ProfileID}}" data-testid="pending-accept-profile" />
                  <input type="hidden" name="back" value="/connections" />
                  <button type="submit" class="btn" data-testid="pending-accept">Accept (Simulated)</button>
                </form>
              </div>
            </div>
          </article>
        {{else}}
          <div class="empty" data-testid="pending-empty">No invitations right now.</div>
        {{end}}
      </div>

      <h2 data-testid="connections-accepted-title">Your connections</h2>
      <div class="list" data-testid="connections-accepted">
        {{range .Accepted}}
          {{$p := index $.Profiles .ProfileID}}
          <article class="item" data-testid="accepted-connection" data-profile-id="{{.ProfileID}}">
            <div class="row between">
              <div>
                <div class="name" data-testid="accepted-name">{{$p.First}} {{$p.Last}}</div>
                <div class="meta" data-testid="accepted-meta">{{$p.Title}} • {{$p.Company}}</div>
              </div>
              <div class="row">
                <a class="btn secondary" href="/messages?thread=thread-{{.ProfileID}}" data-testid="accepted-message">Message</a>
                <a class="btn secondary" href="/profile/{{.ProfileID}}" data-testid="accepted-view">View</a>
              </div>
            </div>
          </article>
        {{else}}
          <div class="empty" data-testid="accepted-empty">No connections yet. Use Search to find people.</div>
        {{end}}
      </div>
    </div>
  </div>
</section>
{{end}}
{{template "layout" .}}
